---
title: "p8105_hw2_sjk2254"
author: "Sharon Kulali"
date: "2023-10-02"
output: github_document
---

```{r setup, message = FALSE}
# loading the needed packages

library(tidyverse)
library(readxl)
```


## Problem 2

### Mr. Trash Wheel Sheet

```{r}
# importing mr. trash dataset

mt_df = readxl::read_excel("trash_wheel_data_updated.xlsx", sheet = 1, range = "A2:N587") 
```

```{r}
# cleaning up the dataset

mt_df =
  janitor::clean_names(mt_df) |> 
  drop_na(dumpster)|> 
  mutate(
    year = as.numeric(year),
    vessel_name = "mr trash")
```

```{r}
# updating the homes_powered variable

mt_df = 
  mutate(mt_df, homes_powered = (weight_tons*500)/30)
```

### Professor Trash Wheel Sheet

```{r}
# importing professor trash dataset

pt_df = readxl::read_excel("trash_wheel_data_updated.xlsx", sheet = 2, range = "A2:M109")
```

```{r}
# cleaning up the dataset

pt_df =
  janitor::clean_names(pt_df)|> 
  drop_na(dumpster)|> 
  mutate(vessel_name = "prof trash")
```

```{r}
# updating the homes_powered variable

pt_df = mutate(pt_df, homes_powered = (weight_tons*500)/30)
```

### Gwynnda Trash Wheel Sheet

```{r}
# importing gwynnda trash dataset

gt_df = readxl::read_excel("trash_wheel_data_updated.xlsx", sheet = 4, range = "A2:L159")
```

```{r}
# cleaning up the dataset

gt_df =
  janitor::clean_names(gt_df)|> 
  drop_na(dumpster)|> 
  mutate(vessel_name = "gwyn trash") 
```

```{r}
# updating the homes_powered variable

gt_df = mutate(gt_df, homes_powered = (weight_tons*500)/30)
```

### Combined

```{r}
# creating a new data frame that combines all the data sets

trash_df = bind_rows(mt_df, pt_df, gt_df)
```

### Summary 

Mr. Trash Wheel (`mt_df`), Professor Trash Wheel (`pt_df`), and Gwynnda Trash Wheel (`gt_df`) are water vessels that remove trash from the Jones Falls river in Baltimore, Maryland and dumps them into a dumpster site. The data sets `mt_df`, `pt_df`, and `gt_df` include information about the dumpster number, date of collection, amount of total litter, and the specific litter type. The total weight of trash collected by Professor Trash Wheel was `r pt_df |> pull(weight_tons) |> sum()` tons. The total number of cigarette butts collected by Gwynnda Trash Wheel was `r gt_df |> filter(month == "July" & year == 2021) |> select(cigarette_butts) |> sum()` tons. In the combined data set of all three trash vessels (`trash_df`), there are `r nrow(trash_df)` observations with an average litter weight of `r trash_df |> pull(weight_tons) |> mean() |> round(2)` tons and information collected from `r trash_df |> pull(year) |> min()` to `r trash_df |> pull(year) |> max()`. Notably, the sports balls variable had `r trash_df |> pull(sports_balls) |> is.na() |> sum()` missing values.

## Problem 3

### Baseline Demographics

```{r, message = FALSE}
# importing the data set

baseline_df = read_csv("data/MCI_baseline.csv", skip = 1, col_names = TRUE)
```

```{r, message = FALSE}
# cleaning the data set

baseline_df =
 janitor::clean_names(baseline_df) |> 
  mutate(
    sex = case_match(
      sex,
      1 ~ "male",
      0 ~ "female"
    ),
    apoe4 = case_match(
      apoe4,
      1 ~ "carrier",
      0 ~ "non-carrier"
    )) 

baseline_df_tidy =
  baseline_df |> 
  mutate( age_at_onset = as.numeric(age_at_onset)
  ) |> 
  drop_na(age_at_onset)
```

### Summary

The dataset (`baseline_df`) describes basic demographic information of participants in the study. The study aimed to understand the trajectory of Alzheimer's disease (AD) biomarkers by monitoring the development of Mild Cognitive Impairement (MCI). The initial dataset contains information about the variables in the first row thus when importing the data, it had to be indicated that the first row should be skipped. Overall, `r nrow(baseline_df)` participants were recruited and `r nrow(baseline_df_tidy)` developed MCI. The average baseline age was `r baseline_df_tidy |> pull(age_at_onset) |> mean() |> round(0)` years old with `r (baseline_df |> filter(sex == "female" & apoe4 == "carrier") |> count()) / (nrow(baseline_df)) * 100` percent of women in the study being a apoe4 carrier, the gene associated with a higher risk of developing Alzheimer's disease. 

### Biomarker Values

```{r, message = FALSE}
# importing the data set

amyloid_df = read_csv("data/mci_amyloid.csv", skip = 1, col_names = TRUE)
```

```{r}
# cleaning the data set

amyloid_df =
  janitor::clean_names(amyloid_df)|> 
  rename(id = study_id)
```

```{r}
# joining the data sets

full_df = full_join(baseline_df_tidy, amyloid_df)

a_b_df = inner_join(baseline_df, amyloid_df)

final_df = inner_join(baseline_df_tidy, amyloid_df)
```

